<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <style type="text/css">
    #info {
  position: absolute;
  top: 2%;
  width: 100%;
  padding: 10px;
  text-align: center;
  color: #ffff00
}
body {
  overflow: hidden;
}
  </style>
  <title>HW1</title>
</head>
<body>
  <div id="info">Homework 1
  <br/> 
  <br/>
  <button id="toggle" style="width:20%">Toggle Turn</button>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r70/three.min.js"></script>
<script src="https://dl.dropboxusercontent.com/u/3587259/Code/Threejs/OrbitControls.js"></script>
<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
<script type='text/javascript'>
var scene, renderer, camera;
var controls;
var mesh, angle = 0,
  turn = false;
  
var clock = new THREE.Clock();
var a;
init();
animate();

$("#toggle").click(function() {
  turn = !turn;
  if(turn)
  	clock.start ();
  else
  	clock.stop ();
});

function init() {
  scene = new THREE.Scene();
  renderer = new THREE.WebGLRenderer();
  renderer.setSize(window.innerWidth, window.innerHeight);
  renderer.setClearColor(0x876543);
  document.body.appendChild(renderer.domElement);

  camera = new THREE.PerspectiveCamera(50, window.innerWidth / window.innerHeight, 1, 1000);
  camera.position.y = 500;
  controls = new THREE.OrbitControls(camera, renderer.domElement);

  /*var geometry = new THREE.BoxGeometry(100, 20, 20);
  var material = new THREE.MeshBasicMaterial({
    wireframe: true
  });

  mesh = new THREE.Mesh(geometry, material);
  scene.add(mesh);*/

  var gridXZ = new THREE.GridHelper(100, 10);
  gridXZ.setColors(new THREE.Color(0xff0000), new THREE.Color(0xffffff));
  //scene.add(gridXZ);

  window.addEventListener('resize', onWindowResize, false);
  
  var geometry = new THREE.CylinderGeometry( 120, 120, 1, 60 );
	var material = new THREE.MeshBasicMaterial({
  	side:THREE.DoubleSide,
    wireframe: true,
    color: 0xffff00
  });
	var cylinder = new THREE.Mesh( geometry, material );
	scene.add( cylinder );

	var geometry2 = new THREE.CylinderGeometry( 5, 5, 60, 32 );
	var material2 = new THREE.MeshBasicMaterial( {color: 0xff0000} );
	var cylinder2 = new THREE.Mesh( geometry2, material2 );
	
  var geometry3 = new THREE.CylinderGeometry( 10, 0, 40, 32 );
	var material3 = new THREE.MeshBasicMaterial( {color: 0xff0000} );
	var cylinder3 = new THREE.Mesh( geometry3, material3 );
  
  var geometry4 = new THREE.CylinderGeometry( 40, 40, 5, 32 );
	var material4 = new THREE.MeshBasicMaterial({
  	side:THREE.DoubleSide,
    wireframe: 0,
    color: 0x999999
  });
	var cylinder4 = new THREE.Mesh( geometry4, material4 );
  cylinder4.rotation.x = Math.PI / 2;
  cylinder4.position.z = -135;
  scene.add( cylinder4 );
  
  var geometry5 = new THREE.CylinderGeometry( 5, 5, 25, 32 );
	var material5 = new THREE.MeshBasicMaterial({
  	side:THREE.DoubleSide,
    wireframe: 0,
  	color: 0x888888
  });
	var cylinder5 = new THREE.Mesh( geometry5, material5 );
  cylinder5.rotation.x = Math.PI / 2;
  cylinder5.position.z = -125;
  scene.add( cylinder5 );
  
  cylinder3.rotation.x = Math.PI / 2;
	cylinder3.position.z = -80;
  scene.add( cylinder3 );
  
  a = new THREE.Object3D();
	cylinder2.rotation.x = Math.PI / 2;
	cylinder2.position.z = -30;
	
  a.add( cylinder2 );
  a.add( cylinder3 );
	scene.add(a);
  
  
  var geometry22 = new THREE.CylinderGeometry( 5, 5, 60, 32 );
	var material22 = new THREE.MeshBasicMaterial( {color: 'green'} );
	var cylinder22 = new THREE.Mesh( geometry22, material22 );
	
  var geometry33 = new THREE.CylinderGeometry( 10, 0, 40, 32 );
	var material33 = new THREE.MeshBasicMaterial( {color: 'green'} );
	var cylinder33 = new THREE.Mesh( geometry33, material33 );
  
  cylinder33.rotation.x = Math.PI / 2;
	cylinder33.position.z = -80;
	cylinder22.rotation.x = Math.PI / 2;
	cylinder22.position.z = -30; 
  
  b = new THREE.Object3D();
  
	b.add( cylinder22 );
  b.add( cylinder33 );
	scene.add(b);
}

function onWindowResize() {
  camera.aspect = window.innerWidth / window.innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(window.innerWidth, window.innerHeight);
}

function animate() {
  controls.update();
  var degree;
  if (turn){
  	var d = clock.getDelta ();
  	angle += 2*Math.PI / 60 *d;
  	a.rotation.y = -angle;  
  	degree = Math.floor(angle / ( 2*Math.PI / 60));
    b.rotation.y = degree* ( 2*Math.PI / 60);
  }
    //angle += 30* Math.PI ;
    //angle += 0.002;
  //mesh.rotation.y = angle;

  requestAnimationFrame(animate);
  renderer.render(scene, camera);
}
</script>
</body>
</html>

